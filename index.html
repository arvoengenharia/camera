<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>GeoCam UTM</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0f172a">

  <!-- Proj4 local -->
  <script src="./proj4.min.js"></script>

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <div class="logo">UTM</div>
        <div>
          <div style="font-weight:800">GeoCam UTM</div>
          <div style="font-size:12px;color:#9bb0d9">Câmera • GPS • Salvar #ZonaBanda-E-N.jpg</div>
        </div>
      </div>
      <div class="statusbar"><span id="chipSecure" class="chip">HTTPS…</span><span id="chipGPS" class="chip">GPS: —</span><span id="chipCam" class="chip">Câmera: —</span></div>
    </header>

    <div class="grid">
      <section class="card">
        <h2>Captura</h2>
        <div class="body">
          <div class="preview">
            <video id="video" playsinline autoplay muted></video>
            <canvas id="canvas"></canvas>
            <img id="still" alt="Prévia"/>
            <div class="overlay"></div>
            <div id="badge" class="badge">UTM: —</div>
          </div>
          <div class="actions">
            <button id="btnStart" class="primary">Abrir câmera</button>
            <button id="btnShot" disabled>Capturar foto</button>
            <button id="btnRedo" style="display:none">Refazer</button>
            <a id="btnSave" class="button" style="display:none" download>Salvar</a>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="body">
          <div class="row"><span class="lbl">Status GPS</span><span class="val" id="gpsStatus">—</span></div>
          <div class="row"><span class="lbl">Precisão</span><span class="val" id="acc">—</span></div>
          <div class="row"><span class="lbl">Zona & Banda</span><span class="val" id="zoneBand">—</span></div>
          <div class="row"><span class="lbl">Easting (E)</span><span class="val" id="easting">—</span></div>
          <div class="row"><span class="lbl">Northing (N)</span><span class="val" id="northing">—</span></div>
          <div class="row"><span class="lbl">Nome do arquivo</span><span class="val" id="fname">—</span></div>
          <div style="font-size:12px;color:#9bb0d9">Dica: aguarde precisão &lt; 10 m antes de capturar.</div>
        </div>
      </section>
    </div>

    <footer>Permita câmera e localização. Melhor em HTTPS (ou localhost).</footer>
  </div>

  <script src="script.js"></script>
</body>
</html>
